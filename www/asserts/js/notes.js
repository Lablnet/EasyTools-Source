function editNote(){var id=$("#editId").val(); var titleNoteEdit=$("#titleNoteEdit").val(); var noteEdit=$("#noteEdit").val(); if (validateInput(id)==true && validateInput(titleNoteEdit)==true && validateInput(noteEdit)==true){database.transaction(function(tx){tx.executeSql('UPDATE notes SET title=?, text=? WHERE id=?', [titleNoteEdit, noteEdit,id]);}); redirect('notes.html');}else{M.toast({html: 'All fields are required'});}}function addNote(){var title=document.getElementById("addNoteTitle"); var text=document.getElementById("addNoteText"); if (validateInput(title.value)==true && validateInput(text.value)==true){var note={"id": new Date().getTime(), "title": title.value, "text": text.value}; database.transaction(function(tx){tx.executeSql('INSERT INTO notes (id, title,text) values (?,? ,?)', [note.id, note.title ,note.text]);}); note.value=""; title.value=''; text.value=''; redirect('notes.html');}else{M.toast({html: 'All fields are required'});}}function deleteNote(id){database.transaction(function(tx){tx.executeSql('DELETE FROM notes WHERE id=?', [id]);}); redirect('notes.html');}function showAllNotes(){removeChilds('ourNotes'); database.transaction(function(tx){tx.executeSql('SELECT * FROM notes Order by id desc', [], function (tx, results){var len=results.rows.length; for (var i=0; i < len; i++){var id=results.rows.item(i).id; var title=results.rows.item(i).title; var text=results.rows.item(i).text; var li=document.createElement('li'); li.setAttribute('class', 'collection-item card-panel hoverable'); li.innerHTML='<b><i>' + timeSince(id) + '</i></b> <br>'+title+' <br><label>' + text.substring(0,100) + '</label>'; li.setAttribute('data-key', 'notesBtnsModel'+id); li.addEventListener('click', function(){openNoteModel(this.getAttribute('data-key'));}); var edit=document.createElement("a"); edit.innerHTML=' Edit'; edit.setAttribute('class', ''); edit.setAttribute('data-key', id); edit.setAttribute('data-val', title); edit.setAttribute('data-text', text); edit.addEventListener("click", function(){localStorage.setItem('id', this.getAttribute('data-key')); localStorage.setItem('title', this.getAttribute('data-val')); localStorage.setItem('text', this.getAttribute('data-text')); redirect('edit_note.html');}, false); var view=document.createElement("a"); view.innerHTML=' View '; view.setAttribute('class', ''); view.setAttribute('data-key', id); view.setAttribute('data-time', timeSince(id)); view.setAttribute('data-title', title); view.setAttribute('data-val', text); view.addEventListener("click", function(){localStorage.setItem('time', this.getAttribute('data-time')); localStorage.setItem('title', this.getAttribute('data-title')); localStorage.setItem('text', this.getAttribute('data-val')); redirect('view_note.html');}, false); var del=document.createElement("a"); del.innerHTML=' Delete'; del.setAttribute('class', ''); del.setAttribute('style', 'border: 0px; color: red'); del.setAttribute('data-key', id); del.setAttribute('data-val', title); del.addEventListener("click", function(){localStorage.setItem('id', this.getAttribute('data-key')); redirect('delete_note.html');}, false); var model=document.createElement('div'); model.setAttribute('id', 'notesBtnsModel'+id); model.setAttribute('class', 'modal bottom-sheet'); var modelChildMain=document.createElement('div'); modelChildMain.setAttribute('class', 'modal-content'); var modelChildChild=document.createElement('div'); modelChildChild.setAttribute('id', 'notesBtns'); modelChildChild.appendChild(view); modelChildChild.appendChild(edit); modelChildChild.appendChild(del); console.log(view); modelChildMain.appendChild(modelChildChild); model.appendChild(modelChildMain); var modelChildFooter=document.createElement('div'); modelChildFooter.setAttribute('class', 'modal-footer'); modelChildFooter.innerHTML='<a href="#!" class="modal-close waves-effect waves-green btn-flat">Close</a>'; model.appendChild(modelChildFooter); document.body.appendChild(model); document.getElementById("ourNotes").appendChild(li);}});});}